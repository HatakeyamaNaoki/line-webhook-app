IMAGE_ORDER_PROMPT = """
以下の画像に含まれる注文内容を、EXCEL形式で構造化してください。
＜共通部分＞
- 出力はカンマ区切り、以下の順番と一致させてください。項目は11項目ありますので、必ず11列で出力してください。
  列順: 顧客,発注者,商品名,サイズ,数量,単位,納品希望日,納品場所,時間,社内担当者,備考
  【出力サンプル】
  アグリライブ株式会社,徳田直己,トマト,M,10,箱,20250702,東京都中央区,2025063009,はたけやま,小さめ
- サイズカラムには「S」「M」「L」「2L」「3L」「4L」「5L」・・・など商品に付随するサイズ情報があれば記載してください。
- サイズが無い場合、サイズカラムは空白で構いません。（"小さめ"・"大きめ"のような形容詞でサイズを表現している場合は備考カラムに記載してください。）
- 数量は数値＋単位に分けて記載してください（例：10, 玉）
- 「玉レタス1個」や「青ネギ3束」など、数量の直後に「個」「箱」「束」など単位が記載されている場合は、「数量」には数値のみ、「単位」にはその単位（例：「個」「箱」「束」など）を正確に記載してください。
  - 例：「玉レタス1個」→ 商品名: 玉レタス, 数量: 1, 単位: 個
  - 例：「青ネギ3束」→ 商品名: 青ネギ, 数量: 3, 単位: 束
- 商品名に単位が含まれておらず、数量のあとに単位がついていない場合は「単位」カラムは空白で良いです。
- 「小さい」「大きめ」などの形容詞は備考欄に記載してください。
- 何か注意点がある際にも備考欄に記載してください。
- ヘッダーは出力せず、データ部分のみ複数行で出力してください。
- 不要な補足文（例：「この情報を参考にしてください」など）は出力しないでください。
- "..." のような行や意味のない行は出力しないでください。
- 納品希望日が「明日」「明後日」「3日後」など相対的な表現の場合は、以下の「現在日時（日本時間）」を基準に、「明日＝+1日」「明後日＝+2日」「3日後＝+3日」として正確に日付を加算し、YYYYMMDD形式で出力してください（※月またぎ・年またぎにも対応すること）。
  特に「明後日」は+2日、「3日後」は+3日、「4日後」は+4日というふうに、対応する日数を厳密に「必ず」解釈してください。
  ※「明後日」は絶対に+2日で計算してください。「明日」と混同しないでください。
- 現在日時（日本時間）: {now_verbose}（JST）
- 社内担当者は常に「{operator_name}」としてください（画像から読み取らない）。
- 読み取りができない場合でも、謝罪や案内文は出力せず、読み取れる範囲でデータのみを返してください。
- 時間列には常に「{now_str}」を出力してください。
＜画像データがLINEスクリーンショットの場合＞
- 顧客名：LINE送信者名のうち、会社名部分（例：アグリライブ株式会社、アグリライブ）
- 発注者名：LINE送信者名のうち、会社名部分（例：徳田直己、徳田）
- それ以外の項目：メッセージ内から抽出
＜画像データが注文書の場合＞
- FAXやPDFの注文書内に住所や納品場所らしきテキストがあれば“納品場所”カラムに正確に抜き出して記載してください。
　その際に、郵便番号があれば、郵便番号、住所の順に記載してください。
- 注文書（PDFやFAX）では、宛名欄（通常は左上）や本文冒頭には、その注文書の受取先（発注先・自社）が記載されています。
  一方、注文元（顧客）は、右上または「会社情報欄」に記載されています。
- 顧客カラムには、「注文書の右上の会社情報欄」に記載された会社名を記載してください。
- 発注者カラムには、同じく右上欄や「担当者」欄の個人名のみを記載してください。
- 宛名欄（左上や冒頭など）に記載された会社名・自社名・御中・様などの情報は**顧客カラムや発注者カラムに一切使わない**でください。
- 「顧客」と「発注者」が両方とも同じ内容にならないように注意してください。
＜画像データが納品書の場合＞

以下が画像データです：
"""

TEXT_ORDER_PROMPT = """
以下の注文内容（テキスト）をEXCEL形式で構造化してください。
＜共通部分＞
- 出力はカンマ区切り、以下の順番と一致させてください。項目は11項目ありますので、必ず11列で出力してください。
  列順: 顧客,発注者,商品名,サイズ,数量,単位,納品希望日,納品場所,時間,社内担当者,備考
  【出力サンプル】
  アグリライブ株式会社,徳田直己,トマト,M,10,箱,20250702,東京都中央区,2025063009,はたけやま,小さめ
- サイズカラムには「S」「M」「L」「2L」「3L」「4L」「5L」・・・など商品に付随するサイズ情報があれば記載してください。
- サイズが無い場合、サイズカラムは空白で構いません。（"小さめ"・"大きめ"のような形容詞でサイズを表現している場合は備考カラムに記載してください。）
- 数量は数値＋単位に分けて記載してください（例：10, 玉）
- 「玉レタス1個」や「青ネギ3束」など、数量の直後に「個」「箱」「束」など単位が記載されている場合は、「数量」には数値のみ、「単位」にはその単位（例：「個」「箱」「束」など）を正確に記載してください。
  - 例：「玉レタス1個」→ 商品名: 玉レタス, 数量: 1, 単位: 個
  - 例：「青ネギ3束」→ 商品名: 青ネギ, 数量: 3, 単位: 束
- 商品名に単位が含まれておらず、数量のあとに単位がついていない場合は「単位」カラムは空白で良いです。
- 「小さい」「大きめ」などの形容詞は備考欄に記載してください。
- 何か注意点がある際にも備考欄に記載してください。
- ヘッダーは出力せず、データ部分のみ複数行で出力してください。
- 不要な補足文（例：「この情報を参考にしてください」など）は出力しないでください。
- "..." のような行や意味のない行は出力しないでください。
- 納品希望日が「明日」「明後日」「3日後」など相対的な表現の場合は、以下の「現在日時（日本時間）」を基準に、「明日＝+1日」「明後日＝+2日」「3日後＝+3日」として正確に日付を加算し、YYYYMMDD形式で出力してください（※月またぎ・年またぎにも対応すること）。
  特に「明後日」は+2日、「3日後」は+3日、「4日後」は+4日というふうに、対応する日数を厳密に「必ず」解釈してください。
  ※「明後日」は絶対に+2日で計算してください。「明日」と混同しないでください。
- 現在日時（日本時間）: {now_verbose}（JST）
- 社内担当者は常に「{operator_name}」としてください（画像から読み取らない）。
- 読み取りができない場合でも、謝罪や案内文は出力せず、読み取れる範囲でデータのみを返してください。
- 時間列には常に「{now_str}」を出力してください。
  
列順: 顧客,発注者,商品名,数量,単位,納品希望日,納品場所,時間,社内担当者,備考

テキスト注文内容:
{text}
"""
IMAGE_ORDER_PROMPT = """
以下の画像に含まれる注文内容を、EXCEL形式で構造化してください。
＜共通部分＞
- 出力はカンマ区切り、以下の順番と一致させてください。項目は11項目ありますので、必ず11列で出力してください。
  列順: 顧客,発注者,商品名,サイズ,数量,単位,納品希望日,納品場所,時間,社内担当者,備考
  【出力サンプル】
  アグリライブ株式会社,徳田直己,トマト,M,10,箱,20250702,東京都中央区,2025063009,はたけやま,小さめ
- サイズカラムには「S」「M」「L」「2L」「3L」「4L」「5L」・・・など商品に付随するサイズ情報があれば記載してください。
- サイズが無い場合、サイズカラムは空白で構いません。（"小さめ"・"大きめ"のような形容詞でサイズを表現している場合は備考カラムに記載してください。）
- 数量は数値＋単位に分けて記載してください（例：10, 玉）
- 「玉レタス1個」や「青ネギ3束」など、数量の直後に「個」「箱」「束」など単位が記載されている場合は、「数量」には数値のみ、「単位」にはその単位（例：「個」「箱」「束」など）を正確に記載してください。
  - 例：「玉レタス1個」→ 商品名: 玉レタス, 数量: 1, 単位: 個
  - 例：「青ネギ3束」→ 商品名: 青ネギ, 数量: 3, 単位: 束
- 商品名に単位が含まれておらず、数量のあとに単位がついていない場合は「単位」カラムは空白で良いです。
- 「小さい」「大きめ」などの形容詞は備考欄に記載してください。
- 何か注意点がある際にも備考欄に記載してください。
- ヘッダーは出力せず、データ部分のみ複数行で出力してください。
- 不要な補足文（例：「この情報を参考にしてください」など）は出力しないでください。
- "..." のような行や意味のない行は出力しないでください。
- 納品希望日が「明日」「明後日」「3日後」など相対的な表現の場合は、以下の「現在日時（日本時間）」を基準に、「明日＝+1日」「明後日＝+2日」「3日後＝+3日」として正確に日付を加算し、YYYYMMDD形式で出力してください（※月またぎ・年またぎにも対応すること）。
  特に「明後日」は+2日、「3日後」は+3日、「4日後」は+4日というふうに、対応する日数を厳密に「必ず」解釈してください。
  ※「明後日」は絶対に+2日で計算してください。「明日」と混同しないでください。
- 現在日時（日本時間）: {now_verbose}（JST）
- 社内担当者は常に「{operator_name}」としてください（画像から読み取らない）。
- 読み取りができない場合でも、謝罪や案内文は出力せず、読み取れる範囲でデータのみを返してください。
- 時間列には常に「{now_str}」を出力してください。
＜PDFデータが注文書の場合＞
- FAXやPDFの注文書内に住所や納品場所らしきテキストがあれば“納品場所”カラムに正確に抜き出して記載してください。
　その際に、郵便番号があれば、郵便番号、住所の順に記載してください。
- 注文書（PDFやFAX）では、宛名欄（通常は左上）や本文冒頭には、その注文書の受取先（発注先・自社）が記載されています。
  一方、注文元（顧客）は、右上または「会社情報欄」に記載されています。
- 顧客カラムには、「注文書の右上の会社情報欄」に記載された会社名を記載してください。
- 発注者カラムには、同じく右上欄や「担当者」欄の個人名のみを記載してください。
- 宛名欄（左上や冒頭など）に記載された会社名・自社名・御中・様などの情報は**顧客カラムや発注者カラムに一切使わない**でください。
- 「顧客」と「発注者」が両方とも同じ内容にならないように注意してください。
＜PDFデータが納品書の場合＞

以下がPDFデータです：
"""

normalize_product_name_prompt = """
次の野菜・果物の名称を、できるだけ自然な形で**全角カタカナ**に統一してください。
- TOMATO → トマト
- 玉葱 → タマネギ
- りんご → リンゴ
- ﾄﾏﾄ → トマト
- その他も同様に、慣用表現・商品名ごとに最も一般的なカタカナ表記を返してください。
- 原文がカタカナの場合はそのまま返してください。
- カタカナで表記が難しい場合は原文をそのまま返してください。
"""

normalize_unit_prompt = """
次の「商品名」「単位」「数量」を受け取り、以下のルールで単位を正規化してください。

- 重量系（kg・キログラム・g・グラム）はすべて「kg」に統一してください（gは数量を1000分の1に補正）。
- 包装単位（ケース・袋）はそのままにしてください。
- 商品ごとの慣用単位（例: キャベツ→玉、レタス→玉、にんじん→本）などはできるだけ一般的な表記に統一してください。
- 判断が難しい場合は、そのままの単位を返してください。
- 出力例：「キャベツ」「個」→「玉」

"""